global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: 'linux-nodes'
    static_configs:
      - targets:
        # monitoring_clients 그룹에 있는 모든 호스트를 자동으로 루프
{% for host in groups['monitoring_clients'] %}
        - "{{ hostvars[host].ansible_host | default(host) }}:{{ node_exporter_port }}"
{% endfor %}
